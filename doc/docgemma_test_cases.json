{
  "metadata": {
    "version": "2.0",
    "description": "DocGemma test cases - Expert user only, no emergency detection",
    "total_cases": 54,
    "categories": [
      "direct",
      "single_tool",
      "multi_tool",
      "image_single_tool",
      "image_multi_tool",
      "edge_cases"
    ]
  },
  "test_cases": [
    {
      "id": "D1",
      "category": "direct",
      "prompt": "Good morning, I'm Dr. Smith starting my shift.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "direct",
      "expected_tools": [],
      "expected_subtasks": 0,
      "notes": "Simple greeting, no tools needed."
    },
    {
      "id": "D2",
      "category": "direct",
      "prompt": "Thanks, that's exactly what I needed.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "direct",
      "expected_tools": [],
      "expected_subtasks": 0,
      "notes": "Gratitude expression, no action needed."
    },
    {
      "id": "D3",
      "category": "direct",
      "prompt": "Quick refresher - what's the mechanism of action for metformin?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "direct",
      "expected_tools": [],
      "expected_subtasks": 0,
      "notes": "Textbook knowledge, no tools needed."
    },
    {
      "id": "D4",
      "category": "direct",
      "prompt": "Define SIADH for me.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "direct",
      "expected_tools": [],
      "expected_subtasks": 0,
      "notes": "Basic clinical definition, can answer from training."
    },
    {
      "id": "D5",
      "category": "direct",
      "prompt": "Can you elaborate on the renal dosing adjustment you mentioned?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "direct",
      "expected_tools": [],
      "expected_subtasks": 0,
      "notes": "Follow-up clarification, uses conversation context."
    },
    {
      "id": "D6",
      "category": "direct",
      "prompt": "Walk me through the renin-angiotensin-aldosterone system.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "direct",
      "expected_tools": [],
      "expected_subtasks": 0,
      "notes": "Basic physiology, no external data needed."
    },
    {
      "id": "D7",
      "category": "direct",
      "prompt": "What are the main classes of antihypertensives?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "direct",
      "expected_tools": [],
      "expected_subtasks": 0,
      "notes": "Standard pharmacology knowledge."
    },
    {
      "id": "D8",
      "category": "direct",
      "prompt": "How do you calculate creatinine clearance using Cockcroft-Gault?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "direct",
      "expected_tools": [],
      "expected_subtasks": 0,
      "notes": "Formula explanation, no lookup needed."
    },
    {
      "id": "D9",
      "category": "direct",
      "prompt": "What clinical decision support can you provide?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "direct",
      "expected_tools": [],
      "expected_subtasks": 0,
      "notes": "Question about agent capabilities."
    },
    {
      "id": "D10",
      "category": "direct",
      "prompt": "What does CHADS-VASc stand for?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "direct",
      "expected_tools": [],
      "expected_subtasks": 0,
      "notes": "Standard acronym, no lookup needed."
    },
    {
      "id": "S1",
      "category": "single_tool",
      "prompt": "Pull up the boxed warnings for Xarelto.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["check_drug_safety"],
      "expected_subtasks": 1,
      "notes": "Single FDA safety lookup."
    },
    {
      "id": "S2",
      "category": "single_tool",
      "prompt": "Check for interactions between warfarin and amiodarone.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["check_drug_interactions"],
      "expected_subtasks": 1,
      "notes": "Two-drug interaction check."
    },
    {
      "id": "S3",
      "category": "single_tool",
      "prompt": "What's the latest evidence on PCSK9 inhibitors for secondary prevention in statin-intolerant patients?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["search_medical_literature"],
      "expected_subtasks": 1,
      "notes": "Specialized literature query."
    },
    {
      "id": "S4",
      "category": "single_tool",
      "prompt": "Find recruiting trials for metastatic triple-negative breast cancer.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["find_clinical_trials"],
      "expected_subtasks": 1,
      "notes": "Clinical trial search for specific condition."
    },
    {
      "id": "S5",
      "category": "single_tool",
      "prompt": "Pull up the records for patient John Smith, DOB 03/15/1978.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["get_patient_record"],
      "expected_subtasks": 1,
      "notes": "EHR read operation."
    },
    {
      "id": "S6",
      "category": "single_tool",
      "prompt": "Add penicillin allergy to patient Maria Garcia's chart - anaphylaxis in childhood.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["update_patient_record"],
      "expected_subtasks": 1,
      "notes": "EHR write operation."
    },
    {
      "id": "S7",
      "category": "single_tool",
      "prompt": "Find current AHA guidelines on anticoagulation in atrial fibrillation.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["search_medical_literature"],
      "expected_subtasks": 1,
      "notes": "Guideline-specific literature search."
    },
    {
      "id": "S8",
      "category": "single_tool",
      "prompt": "What are the FDA warnings for finasteride?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["check_drug_safety"],
      "expected_subtasks": 1,
      "notes": "Drug safety profile lookup."
    },
    {
      "id": "S9",
      "category": "single_tool",
      "prompt": "What's the recommended vancomycin dosing for a patient with eGFR of 35?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["search_medical_literature"],
      "expected_subtasks": 1,
      "notes": "Renal dosing adjustment query."
    },
    {
      "id": "S10",
      "category": "single_tool",
      "prompt": "Check interactions between metformin, lisinopril, and atorvastatin.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["check_drug_interactions"],
      "expected_subtasks": 1,
      "notes": "Multi-drug interaction check."
    },
    {
      "id": "S11",
      "category": "single_tool",
      "prompt": "Any recruiting trials for Fabry disease enzyme replacement therapy?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["find_clinical_trials"],
      "expected_subtasks": 1,
      "notes": "Rare disease trial search."
    },
    {
      "id": "S12",
      "category": "single_tool",
      "prompt": "Recent literature on workup for fatigue, weight loss, night sweats, and cervical lymphadenopathy.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["search_medical_literature"],
      "expected_subtasks": 1,
      "notes": "DDx support via literature."
    },
    {
      "id": "M1",
      "category": "multi_tool",
      "prompt": "Get patient 402's medication list and check if we can safely add Paxlovid for COVID.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["get_patient_record", "check_drug_interactions"],
      "expected_subtasks": 2,
      "notes": "Sequential operation - must get meds first, then check."
    },
    {
      "id": "M2",
      "category": "multi_tool",
      "prompt": "Patient has CKD stage 3 on metformin. Considering SGLT2 inhibitor - check contraindications and interactions.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["check_drug_safety", "check_drug_interactions"],
      "expected_subtasks": 2,
      "notes": "Both safety and interactions needed."
    },
    {
      "id": "M3",
      "category": "multi_tool",
      "prompt": "Pull patient Thompson's record and add that they're starting warfarin 5mg daily.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["get_patient_record", "update_patient_record"],
      "expected_subtasks": 2,
      "notes": "Read then write operation."
    },
    {
      "id": "M4",
      "category": "multi_tool",
      "prompt": "Find latest research on ketamine for treatment-resistant depression and any recruiting trials.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["search_medical_literature", "find_clinical_trials"],
      "expected_subtasks": 2,
      "notes": "Research plus trial search."
    },
    {
      "id": "M5",
      "category": "multi_tool",
      "prompt": "Patient 789 with new A-fib. Pull their record, check apixaban interactions with current meds, and find latest anticoagulation guidelines.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["get_patient_record", "check_drug_interactions", "search_medical_literature"],
      "expected_subtasks": 3,
      "notes": "Three sequential tool calls needed."
    },
    {
      "id": "M6",
      "category": "multi_tool",
      "prompt": "Document that patient Chen is starting amiodarone 200mg daily and pull up the monitoring requirements.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["update_patient_record", "check_drug_safety"],
      "expected_subtasks": 2,
      "notes": "Write operation plus safety lookup."
    },
    {
      "id": "M7",
      "category": "multi_tool",
      "prompt": "Get patient Williams' HbA1c history and find current ADA guidelines on diabetes management.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["get_patient_record", "search_medical_literature"],
      "expected_subtasks": 2,
      "notes": "Patient data plus guideline search."
    },
    {
      "id": "M8",
      "category": "multi_tool",
      "prompt": "Patient starting on tacrolimus - need boxed warnings, interactions with their cyclosporine history, and monitoring guidelines.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["check_drug_safety", "check_drug_interactions", "search_medical_literature"],
      "expected_subtasks": 3,
      "notes": "Full drug workup."
    },
    {
      "id": "M9",
      "category": "multi_tool",
      "prompt": "Patient 123 with refractory CLL - pull their treatment history and find any CAR-T trials they might qualify for.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["get_patient_record", "find_clinical_trials"],
      "expected_subtasks": 2,
      "notes": "Patient history needed for trial matching."
    },
    {
      "id": "M10",
      "category": "multi_tool",
      "prompt": "Evaluating isotretinoin for patient - need FDA warnings, interaction check with their current meds (SSRIs), and latest teratogenicity data.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": ["check_drug_safety", "check_drug_interactions", "search_medical_literature"],
      "expected_subtasks": 3,
      "notes": "Comprehensive pre-prescribing workup."
    },
    {
      "id": "I1",
      "category": "image_single_tool",
      "prompt": "CXR for patient in bed 4. Presenting with fever and productive cough x3 days. Read please.",
      "has_image": true,
      "image_type": "xray",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image"],
      "expected_subtasks": 1,
      "notes": "Standard CXR interpretation with clinical context."
    },
    {
      "id": "I2",
      "category": "image_single_tool",
      "prompt": "CT abdomen for patient with RLQ pain. Rule out appendicitis.",
      "has_image": true,
      "image_type": "ct",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image"],
      "expected_subtasks": 1,
      "notes": "CT interpretation for acute abdomen."
    },
    {
      "id": "I3",
      "category": "image_single_tool",
      "prompt": "MRI brain for patient with new neurological deficits. Evaluate for acute stroke or mass lesion.",
      "has_image": true,
      "image_type": "mri",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image"],
      "expected_subtasks": 1,
      "notes": "Neuroimaging interpretation."
    },
    {
      "id": "I4",
      "category": "image_single_tool",
      "prompt": "H&E slide from breast biopsy. Evaluate for malignancy and grade if applicable.",
      "has_image": true,
      "image_type": "pathology",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image"],
      "expected_subtasks": 1,
      "notes": "Histopathology interpretation."
    },
    {
      "id": "I5",
      "category": "image_single_tool",
      "prompt": "Today's CXR for comparison with last week. Patient post-pneumonia treatment. Has the consolidation improved?",
      "has_image": true,
      "image_type": "xray",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image"],
      "expected_subtasks": 1,
      "notes": "Longitudinal comparison - MedGemma 1.5 capability."
    },
    {
      "id": "I6",
      "category": "image_single_tool",
      "prompt": "Derm consult. 67yo male with this lesion on his back, present 6 months, recently changed color.",
      "has_image": true,
      "image_type": "dermatology",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image"],
      "expected_subtasks": 1,
      "notes": "Skin lesion evaluation."
    },
    {
      "id": "I7",
      "category": "image_single_tool",
      "prompt": "Chest CT for patient Martinez. PE workup - assess for filling defects.",
      "has_image": true,
      "image_type": "ct",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image"],
      "expected_subtasks": 1,
      "notes": "CT pulmonary angiography interpretation."
    },
    {
      "id": "I8",
      "category": "image_single_tool",
      "prompt": "Ankle X-ray, patient with inversion injury. Rule out fracture.",
      "has_image": true,
      "image_type": "xray",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image"],
      "expected_subtasks": 1,
      "notes": "Trauma X-ray interpretation."
    },
    {
      "id": "IM1",
      "category": "image_multi_tool",
      "prompt": "CXR shows RUL mass. Patient ID 555. Pull their smoking history and find current lung cancer screening guidelines.",
      "has_image": true,
      "image_type": "xray",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image", "get_patient_record", "search_medical_literature"],
      "expected_subtasks": 3,
      "notes": "Complex multi-tool with image analysis."
    },
    {
      "id": "IM2",
      "category": "image_multi_tool",
      "prompt": "Read this chest CT for patient Martinez and add the findings to their record.",
      "has_image": true,
      "image_type": "ct",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image", "update_patient_record"],
      "expected_subtasks": 2,
      "notes": "Image interpretation plus EHR documentation."
    },
    {
      "id": "IM3",
      "category": "image_multi_tool",
      "prompt": "Evaluate this pigmented lesion and find current melanoma screening guidelines.",
      "has_image": true,
      "image_type": "dermatology",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image", "search_medical_literature"],
      "expected_subtasks": 2,
      "notes": "Skin lesion with guideline lookup."
    },
    {
      "id": "IM4",
      "category": "image_multi_tool",
      "prompt": "This path slide shows what looks like HER2+ breast cancer. Confirm and find any recruiting trials.",
      "has_image": true,
      "image_type": "pathology",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image", "find_clinical_trials"],
      "expected_subtasks": 2,
      "notes": "Pathology confirmation plus trial search."
    },
    {
      "id": "IM5",
      "category": "image_multi_tool",
      "prompt": "CXR for patient on amiodarone. Check for pulmonary toxicity and pull up the monitoring guidelines.",
      "has_image": true,
      "image_type": "xray",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image", "check_drug_safety"],
      "expected_subtasks": 2,
      "notes": "Drug-induced lung disease evaluation."
    },
    {
      "id": "IM6",
      "category": "image_multi_tool",
      "prompt": "Brain MRI for patient 892. Evaluate for progression and pull their prior imaging notes.",
      "has_image": true,
      "image_type": "mri",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image", "get_patient_record"],
      "expected_subtasks": 2,
      "notes": "Imaging with patient history context."
    },
    {
      "id": "IM7",
      "category": "image_multi_tool",
      "prompt": "New patient CT chest shows nodule. Get their smoking history, check lung cancer screening guidelines, and find any early-stage NSCLC trials.",
      "has_image": true,
      "image_type": "ct",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image", "get_patient_record", "search_medical_literature", "find_clinical_trials"],
      "expected_subtasks": 4,
      "notes": "Comprehensive lung nodule workup."
    },
    {
      "id": "IM8",
      "category": "image_multi_tool",
      "prompt": "Follow-up CXR for patient Davis. Compare to baseline, document findings, and check if they're still on the antibiotic that was prescribed.",
      "has_image": true,
      "image_type": "xray",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image", "update_patient_record", "get_patient_record"],
      "expected_subtasks": 3,
      "notes": "Longitudinal tracking with documentation."
    },
    {
      "id": "EC1",
      "category": "edge_cases",
      "prompt": "Check the patient's creatinine levels from yesterday.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": [],
      "expected_subtasks": 0,
      "requires_clarification": true,
      "clarification_reason": "Missing patient identifier",
      "notes": "Should trigger clarification - which patient?"
    },
    {
      "id": "EC2",
      "category": "edge_cases",
      "prompt": "Is there an interaction I should worry about?",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": [],
      "expected_subtasks": 0,
      "requires_clarification": true,
      "clarification_reason": "Missing drug names",
      "notes": "Should trigger clarification - which medications?"
    },
    {
      "id": "EC3",
      "category": "edge_cases",
      "prompt": "Check interactions with the statin my patient is on.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": [],
      "expected_subtasks": 0,
      "requires_clarification": true,
      "clarification_reason": "Missing specific statin name",
      "notes": "Should clarify which specific statin."
    },
    {
      "id": "EC4",
      "category": "edge_cases",
      "prompt": "What do you see?",
      "has_image": true,
      "image_type": "xray",
      "expected_complexity": "complex",
      "expected_tools": ["analyze_medical_image"],
      "expected_subtasks": 1,
      "notes": "Minimal context but image present - analyze and provide findings."
    },
    {
      "id": "EC5",
      "category": "edge_cases",
      "prompt": "Update the patient's medications.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": [],
      "expected_subtasks": 0,
      "requires_clarification": true,
      "clarification_reason": "Missing patient ID and specific medication changes",
      "notes": "Need both patient and what to update."
    },
    {
      "id": "EC6",
      "category": "edge_cases",
      "prompt": "Find some clinical trials for my patient.",
      "has_image": false,
      "image_type": null,
      "expected_complexity": "complex",
      "expected_tools": [],
      "expected_subtasks": 0,
      "requires_clarification": true,
      "clarification_reason": "Missing condition/disease for trial search",
      "notes": "Need to know what condition to search trials for."
    }
  ]
}
